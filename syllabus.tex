%%% syllabus.tex
%%% Pandoc template using LaTeX article class
%%% For creating PDF from .md file with YAML frontmatter 
%%% Created by Eric M. Fink (https://github.com/LuckyJimJD/pandoc-templates)
%%% 

% START OF SYLLABUS TEMPLATE

% ====================
% = Layout & Spacing =
% ====================

\documentclass[12pt,letterpaper,twoside]{article}
\usepackage[hmarginratio=1:1,top=1in,bottom=.75in,left=1.5in,right=1.5in]{geometry}
\usepackage{needspace}
\usepackage[defaultlines=3,all]{nowidow}
\raggedbottom
\usepackage[singlespacing]{setspace}
\usepackage{ragged2e}
\setlength{\RaggedRightParindent}{0em}
\RaggedRight
\usepackage[none]{hyphenat}
\usepackage{parskip}
\setlength{\parindent}{0em}
\setlength{\parskip}{0.6em plus 0.2em minus 0.1em}
\setlength{\emergencystretch}{3em}  % prevent overfull lines

% ==========================
% = Language & Date Format =
% ==========================

\usepackage[english]{babel}  
\usepackage{datetime}
\newdateformat{mydate}{\THEDAY-\monthname-\THEYEAR}
\usepackage{currfile}

% ==================
% = Colors & Fonts =
% ==================

\usepackage[table]{xcolor}
\definecolor{OffBlack}{HTML}{191919}
\definecolor{OffWhite}{HTML}{fffff8}
\definecolor{DullRed}{HTML}{8C2E24}
\definecolor{TarHeelBlue}{HTML}{4b9cd3}
\definecolor{HopkinsBlue}{HTML}{68ace5}

\usepackage{fontspec}
\setmainfont{Athelas}[Mapping={tex-text}]
\setsansfont{Adelle Sans}[Mapping=tex-text]
\setmonofont{LFT Etica Mono}[Mapping=tex-text,Scale=0.9]
\newfontface\titlefont{Adelle Sans}[Colour=DullRed]
\usepackage{textcomp}
\usepackage{amssymb}

% =======================
% = Headers and Footers = 
% =======================

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyfoot{}
\fancyfoot[C]{}
\fancyfoot[R]{\tiny\texttt{$path$ Revised: \mydate\today}}
\fancyfoot[L]{}
\fancyhead[CE]{\textsc{$course$}}
\fancyhead[CO]{\textsc{$affiliation$}}
\fancyhead[LE]{\textsc{\thepage}}
\fancyhead[LO]{\textsc{$term$}}
\fancyhead[RE]{\textsc{Prof. Fink}}
\fancyhead[RO]{\textsc{\thepage}}

% =========
% = Lists =
% =========

\usepackage{enumitem}
\setlistdepth{6}

\setlist[itemize,1]{label=\textbullet}
\setlist[itemize,2]{label=\textopenbullet}
\setlist[itemize,3]{label=\textperiodcentered}
\setlist[itemize,4]{label=\textendash}
\setlist[itemize,5]{label=\diamond}
\setlist[itemize,6]{label=\textopenbullet}
\setlist[itemize]{leftmargin={1.5em}}
\providecommand{\tightlist}{%
\setlength{\itemsep}{0em}\setlength{\parskip}{0em}\setlength{\itemindent}{0em}}

% ============
% = Headings =
% ============

\usepackage[compact]{titlesec}
% \titlespacing*{<command>}{<left>}{<before-sep>}{<after-sep>}
\titlespacing*{\section}{0em}{3em}{0.5em}
\titlespacing*{\subsection}{0em}{2em}{.5em}
\titlespacing*{\subsubsection}{0em}{1em}{0.5em}
\titlespacing*{\paragraph}{0em}{1em}{.2em}
\titlespacing*{\subparagraph}{0em}{.5em}{.5em}

\setcounter{secnumdepth}{0}

% H1
\titleformat{\section}[hang]
  {\Huge\titlefont}
  {}
  {0pt}
  {}

% H2
\titleformat{\subsection}[hang]
  {\Large\titlefont}
  {}
  {0pt}
  {}
% H3
\titleformat{\subsubsection}[hang]
  {\Large\itshape\rmfamily}
  {\thesubsection}
  {1em}
  {}
% H4
\titleformat{\paragraph}[hang]
  {\normalsize\bfseries\rmfamily}
  {\thesubsubsection}
  {1em}
  {}
% H5
\titleformat{\subparagraph}[block]
  {\footnotesize\itshape\rmfamily}
  {}
  {0em}
  {}

% ==========
% = Quotes =
% ==========

\usepackage{csquotes}

\AtBeginEnvironment{quote}{\small\itshape} 

\renewenvironment{quote}{%
   \list{}{%
     \leftmargin2em   % this is the adjusting screw
     \rightmargin\leftmargin\parsep 1em }
   \item\relax
}
{\endlist}

% ==========
% = Tables =
% ==========

% table with pandoc
$if(tables)$
\usepackage{longtable,booktabs,array}
%\setlength\heavyrulewidth{0pt}
$if(multirow)$
\usepackage{multirow}
$endif$
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
%\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
$endif$

\renewcommand{\arraystretch}{1.5}
\usepackage{etoolbox}
\AtBeginEnvironment{longtable}{\small}

% =============
% = Footnotes = 
% =============

\usepackage[hang,flushmargin]{footmisc} 
$if(notesymbols)$\renewcommand{\thefootnote}{\fnsymbol{footnote}}$endif$
%\renewcommand{\footnotesize}{\fontsize{9pt}{11pt}\selectfont} %use to change size of footnotes

% ==============
% = Hyperlinks =
% ==============

\usepackage[unicode=true]{hyperref}
\hypersetup{colorlinks=true,allcolors=TarHeelBlue}

% ==============================================================================
% =============================== BEGIN DOCUMENT =============================== 
% ==============================================================================

\begin{document}\thispagestyle{empty}

% Sets default font color without overriding hyperlink colors
\color{OffBlack}

% \maketitle

\section{$course$}

\begin{footnotesize}
{$affiliation$} \\
{$term$} \\
$if(days)$
{$days$} \\
$endif$
$if(room)$
{$room$} \\ 
$endif$
$if(repo)$
\texttt{\href{https://emfink.net/$repo$}{emfink.net/$repo$}} \\ 
$endif$
\vspace{1em}

{$author$}  \\
\texttt{\href{mailto:{$email$}}{$email$}} \\
{$phone$}  \\
{Office Hours: }$if(officehours)${$officehours$}$else$\href{https://calendly.com/emfink}{\texttt{calendly.com/emfink}}$endif$

$if(ta2)$
{\itshape{Teaching Assistants:}} \\
{$ta$} \\
\texttt{\href{mailto:{$ta-email$}}{$ta-email$}} \\
{$ta2$} \\
\texttt{\href{mailto:{$ta2-email$}}{$ta2-email$}} \\
$elseif(ta)$
{\itshape{Teaching Assistant:}} \\
{$ta$} \\
\texttt{\href{mailto:{$ta-email$}}{$ta-email$}} \\
$endif$
\end{footnotesize}
\vspace{2em}

\needspace{1\baselineskip}

$body$

\end{document}

% END OF SYLLABUS TEMPLATE

